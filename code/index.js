// כששמים שמות של נושאים לשים בין מילים מקף! שלא יהיה רווחים בכלל, זה יצור לבד רווחים במקום המתאים
// כששמים שמות של נושאים לשים בין מילים מקף! שלא יהיה רווחים בכלל, זה יצור לבד רווחים במקום המתאים
let objInfo = {
    // נושא1-----------------------------------------------------------------------------------------------------------------------
    'אמצעי-מכמ_ד' : {
        pic : `../assets/images/grapics/home-page/matzpen.svg`,
        color : `pink`,

        "תת-נושא1" : {
            discription : ``,
            "משקפת" : {
                type : "text",
                content: [ 'מק"ט: ',"דיאופטר: –2 עד +2", "הגדלה: תלוי משקפת", "מיקום: ניידת או על גבי חצובה"], // מערך של תוכן לפי פסקאות
            },
            "מצפן" : {
                type : "text",
                content: [ 'מק"ט: 100087378',"מיקום: ידני", 'קוטר בועה: עד 2 ס"מ', ""], // מערך של תוכן לפי פסקאות
            },
            "שבשבת" : {
                type : "text",
                content: ['מק"ט: 100092620',"סוללה AA 1.5V: אלקליין", "", ""], // מערך של תוכן לפי פסקאות
            },
            "פריסקופ" : {
                type : "text",
                content: ['מק"ט: ','מיקום: ממוקם אל מול המפקד והנהג ברק"מ כשהמדפים סגורים', "", ""], // מערך של תוכן לפי פסקאות
            }
        },
    },
    // נושא2-----------------------------------------------------------------------------------------------------------------------
    "אמצעי-צליפה" : {
        pic : `../assets/images/grapics/home-page/telescop.svg`,
        color : `mediumaquamarine`,
        
        "תת-נושא2" : {
            discription : ``,
            "לאופולד-זום" : {
                type : "text",
                content: [ 'מק"ט: 86131',"דיאופטר: -4 עד +2", "הגדלה: 6.5 – 20", "טווח יעיל: 1200 מטרים", "מיקום: HTR 0.338 ", "מיקוד: 50  מ' עד אינסוף"], // מערך של תוכן לפי פסקאות
            },
            "מארק-6ירין" : {
                type : "text",
                content: ['מק"ט: 100086344','דיאופטר -3 :עד +3', 'הגדלה:  3-18', 'טווח יעיל: 1200 מטרים', 'מיקום:  HTR 0.338, SR86, M24', 'מיקוד:100  מטר עד אינסוף', 'סוללה: סוללת ליתיום לתאורת לו"ש'], // מערך של תוכן לפי פסקאות
            },
            "אמ-5" : {
                type : "text",
                content: [ 'מק"ט: 100085518','טווח יעיל: 100 -150  מטר', 'מיקום: נק"ל בעל מסילת פיקטיני', 'סוללה:1.5v AA  אלקליין ', 'מצבי הפעלה:  0,1,2,3,4'], // מערך של תוכן לפי פסקאות
            },
            "מארס" : {
                type : "text",
                content: [ 'מק"ט: 100075792','מיקום:  תבור M4', 'סוללה: 1.5v AA אלקליין', 'מצבי הפעלה: שמש, עוצמת לייזר (תלוי בסוג הנשק)'], // מערך של תוכן לפי פסקאות
            },
            "זאבון" : {
                type : "text",
                content: ['מק"ט: 100085321','טווח יעיל: 50 - 200 בקפיצות של 25 מטר, 200 – 335 בקפיצות של 20 מטר', 'מיקום: תבור M4'], // מערך של תוכן לפי פסקאות
            },
            "משקפת-20" : {
                type : "text",
                content: [ 'מק"ט: 100086077','דיאופטר: -4 עד +2', 'הגדלה:  12 – 40', 'טווח יעיל: 1200 מטר', 'מיקום: חצובה או ידני'], // מערך של תוכן לפי פסקאות
            },
            "סברובסקי" : {
                type : "text",
                content: [ 'מק"ט: ','הגדלה: 30 - 70', 'טווח יעיל: 2100 מטר', 'מיקום:  חצובה'], // מערך של תוכן לפי פסקאות
            },
            "אלירז" : {
                type : "text",
                content: ['מק"ט: 100085810','סוללה: 1.5v AA אלקליין (רק בסימן 3)', 'מצבי הפעלה: פנס, חלש - איפוס כוונות לילה, חזק - איפוס כוונות יום'], // מערך של תוכן לפי פסקאות
            },
            "מכביםzאקזקט" : {
                type : "text",
                content: ['מק"ט: 100079313','דיאופטר: -6 עד +2', 'הגדלה: 2 - 4', 'טווח יעיל: 600 מטר', 'מיקום: M16 , גליל, גליל מיקרו, תבור, נגב, מאג', 'סוללה: 4 סוללות 1.5v AA אלקליין/ ליתיום', 'מיקוד: 20 מטר עד אינסוף', 'מצבי הפעלה: תפריט 0,1,2,3'], // מערך של תוכן לפי פסקאות
            },
            "טריג'יקון" : {
                type : "text",
                content: [ 'מק"ט: 100083647','דיאופטר: -0.35', 'הגדלה: x4', 'טווח יעיל: 500 מטר', 'מיקום: M16 - A3, M'], // מערך של תוכן לפי פסקאות
            },
            "מפרומר" : {
                type : "text",
                content: ['מק"ט: 100076080','טווח יעיל: 200 - 250 מטר', 'מיקום: מיקרו תבור (מקלעים(, מאג, נגב, M4, M16', 'סוללה: 1.5v AA אלקליין (1 לשימוש והשנייה רזרבית)', 'מצבי הפעלה: 1,2,3,L, IR'], // מערך של תוכן לפי פסקאות
            },
        },
    },
    // נושא1-----------------------------------------------------------------------------------------------------------------------
    "סמנים" : {
        pic : `../assets/images/grapics/home-page/laiser.svg`,
        color : `lightgreen`,
        "תת-נושא2" : {
            discription : ``,
            "LPL-30" : {
                type : "text",
                content: ['מק"ט: 10008508','אורך גל: 830 nm', 'התבדרות לייזר:0.5  מילירדיאן', 'סוללה: 2 סוללות 1.5v AA  אלקליין', 'מצבי הפעלה: on\off'], // מערך של תוכן לפי פסקאות
            },
            "DAVID" : {
                type : "text",
                content: ['מק"ט: 100088495','אורך גל:  830 nm', 'התבדרות לייזר: 1-120 מילירדיאן', 'סוללה: 1.5v AA אלקליין', 'מצבי הפעלה: לחיצה רגעית', 'רמת סיכון: class 4'], // מערך של תוכן לפי פסקאות
            },
            "DBAL-I2" : {
                type : "text",
                content: ['מק"ט: 100088959','אורך גל: 830 - 870 nm', 'התבדרות לייזר:  0.3או 3 mr', 'סוללה: 1.5v AA אלקליין', 'מצבי הפעלה:  off Aim-low Dual-low Aim-high Dual-low/high Dual-high/high', 'רמת סיכון:  class 3'], // מערך של תוכן לפי פסקאות
            },
            "AIM-1" : {
                type : "text",
                content: ['מק"ט: 100088517','התבדרות לייזר: קו אנכי 0.3 על 7 אלפיות', 'סוללה: 2 סוללות3.5v  ליתיום', 'מצבי הפעלה: תוק, חלש - שלט, חזק - שלט, חלש, חזק', 'רמת סיכון: class 3'], // מערך של תוכן לפי פסקאות
            },
            'מט_ל-למ_מ' : {
                type : "text",
                content: ['מק"ט: 100087421','סוללה:  2.7Vליתיום', 'רמת סיכון: class 1', 'מצבי הפעלה: לזירה, mode'], // מערך של תוכן לפי פסקאות
            },
            'מט_ל-סרוג' : {
                type : "text",
                content: ['מק"ט: 100087863','אורך גל:  1064 nm', 'סוללה: מר 2800', 'רמת סיכון: class 3', 'מצבי הפעלה: לזירה'], // מערך של תוכן לפי פסקאות
            },
        },
    },
    // נושא1-----------------------------------------------------------------------------------------------------------------------
    "ראיית-לילה" : {
        pic : `../assets/images/grapics/home-page/green.svg`,
        color : `mediumpurple`,
        "תת-נושא2" : {
            discription : ``,
            "ליאור" : {
                type : "text",
                content: ['מק"ט: 100079160','דיאופטר: -4.5 עד 2', 'הגדלה: x3 או x4', 'מיקוד: ללא תחום', 'טווח: ליאור x3 300 מטר, ליאורx4  500 מטר, טווח יעיל- 25-300 מטר', 'מיקום:  M4', 'סוללה:1.5v AA  אלקליין', 'מצבי הפעלה: on/off/ptt'], // מערך של תוכן לפי פסקאות
            },
            "אקילה" : {
                type : "text",
                content: ['מק"ט: 100083680','דיאופטר: -5 עד 2', 'הגדלה: 4x או x6', 'מיקוד: אקילה x4 25 מטר עד אינסוף, אקילה 6x 50 מטר עד אינסוף', 'מיקום: אקילה x4  ע"ג  M16-A3, אקילה x6  ע"ג SR86 M24  ובארט 0.5', 'סוללה:2  סוללות 1.5v AA אלקליין', 'מצבי הפעלה: on/off'], // מערך של תוכן לפי פסקאות
            },
            'שח_ע' : {
                type : "text",
                content: ['מק"ט: 100070170','דיאופטר: -6 עד 2', 'מיקוד: 25 ס"מ עד אינסוף', 'מיקום: ע"ג רתמת ראש', 'סוללה:1.5v AA  אלקליין', 'מצבי הפעלה: on-v/ on-m/ off/ IR'], // מערך של תוכן לפי פסקאות
            },
            "צגון" : {
                type : "text",
                content: ['מק"ט: 169000107','סוללה: מר 2800', 'זמן הקלטה: 90 שעות'], // מערך של תוכן לפי פסקאות
            },
            "עדי" : {
                type : "text",
                content: ['מק"ט: 100070154','דיאופטר: -6 עד +2', 'מיקוד: 25 ס"מ עד אינסוף', 'מיקום: קסדה', 'סוללה: 1.5v AA אלקליין + מארז אחורי של ארבע סוללות', 'מצבי הפעלה: on/off/א"א (קבוע או קפיצי)'], // מערך של תוכן לפי פסקאות
            },
            "עכבר" : {
                type : "text",
                content: ['מק"ט: 100081954','דיאופטר: -6 עד +2', 'טווח: א"א- 5 מטר', 'מיקום: קסדה', 'סוללה: 2 סוללות 1.5v AA  אלקליין או ליתיום 2.7v', 'מצבי הפעלה: תוק\גע\א"א'], // מערך של תוכן לפי פסקאות
            },
            "Muns" : {
                type : "text",
                content: ['מק"ט: 100070758','טווח: 1000 מטר', 'מיקום:  HTR 0.338', 'מצבי הפעלה: off/on/בהירות תמונה'], // מערך של תוכן לפי פסקאות
            },
            "T-75" : {
                type : "text",
                content: ['מק"ט: 100038598','הגדלה: 1-4', 'מיקוד: 15 מטר עד אינסוף', 'מיקום:  MIL 1913', 'סוללה: 3 סוללות ליתיום\אלקליין AA ', 'מצבי הפעלה: on/off ', 'זמן הפעלה: 15 שניות'], // מערך של תוכן לפי פסקאות
            },
            'פנ_מ' : {
                type : "text",
                content: ['מק"ט: 100070162','דיאופטר: -2 ', 'מיקוד: 15 מטר עד אינסוף', 'מיקום: רק"מ', 'סוללה: 2.7v ליתיום או מתח הרק"מ 24v', 'מצבי הפעלה: גע, תוק ובהירות שפופרת'], // מערך של תוכן לפי פסקאות
            },
            "זרקור" : {
                type : "text",
                content: ['מק"ט: 100070391','מיקום: ע"ג גיפ, מסוק, רק"מ', 'טווח: מעל25  ס"מ', 'סוללה: מתח ר"מ 24v מתח גיפ 12v', 'מצבי הפעלה: משבת, מתג הפעלה רגעי'], // מערך של תוכן לפי פסקאות
            },
            "נטלי" : {
                type : "text",
                content: ['מק"ט: 100088843','מיקום: ידני', 'סוללה: מר 2800', 'מצבי הפעלה: א"א, תרמי', 'אורך גל:3-5  או 8-12  מיקרון'], // מערך של תוכן לפי פסקאות
            },
            "עמית" : {
                type : "text",
                content: ['מק"ט: 100075881','דיאופטר: -6 עד +2', 'הגדלה: ,x2/x4 מכפיל x2/x3', 'מיקום: חצובה\ ידני', 'סוללה: מר 2800', 'מצבי הפעלה:  on/off'], // מערך של תוכן לפי פסקאות
            },
           
        },
    },
}

// varubal
let strCurrentSubject;
let strMedTypeFromSearch;
let strcurrentPage = "homePage";
let bSearchScreen = false;
let QUESTIONS = [];

// const
const HEADLINE = "אמצעים אופטיים";

/* loading function
--------------------------------------------------------------
Description: */
window.addEventListener("load", () => {
    document.querySelector(".loader").classList.add("fade");
    // place listeners on search button, about button and med buttons
    document.querySelector('.searchButton').addEventListener('click', onClickSearch);
    document.querySelector('.aboutButton').addEventListener('click', onClickAbout);
    createHomePageButtons();
});

/* createHomePageButtons
--------------------------------------------------------------
Description: Adds about page */
const createHomePageButtons = () => {
        let buttons = El("div", {cls: "homePageButtons"},
        El("div", {cls: "homePageButtonsScroll"},),
        // El("img",
        // {attributes: {class: `testButton buttons`, 
        // src : `../assets/images/grapics/med-shelfs/test-button.svg`},}),
    );
    document.querySelector('.homePage').append(buttons);

    for(let subjects of Object.keys(objInfo)) {
        let subjectButton;
        if (Object.keys(objInfo).indexOf(subjects) % 2 === 0) {
            subjectButton = El("div",{classes: ["mainPageButton", subjects]},
                El("img",
                {attributes: {class: `mainPagePic`, 
                src : objInfo[subjects].pic},}),
                El("div", {cls: "medHeadline"}, addSpace(subjects))
            );
        }
        else {
            subjectButton = El("div", {classes: ["mainPageButton", subjects]},
                El("div", {cls: "medHeadline"}, addSpace(subjects)),
                El("img",
                {attributes: {class: `mainPagePic picLeft`, 
                src : objInfo[subjects].pic},}),
            );
        }
        document.querySelector('.homePageButtonsScroll').append(subjectButton);
    }

    let arrMedsButtons = document.querySelectorAll('.mainPageButton');
    for (let i = 0; i < arrMedsButtons.length; i++) {
        arrMedsButtons[i].addEventListener('click', creatMedShelfs);
    };
    // document.querySelector(`.testButton`).addEventListener("click", onClickExam);

}

/* onClickAbout
--------------------------------------------------------------
Description: Adds about page */
const onClickAbout = () => {
    // מראה דף אודות ומעלים כפתור אודות ודף בית 
    document.querySelector('.aboutPage').classList.remove("hidden");
    document.querySelector('.aboutButton').classList.add("hidden");
    document.querySelector('.homePageButtons').classList.add("hidden");
    // משנה את התמונה של הכפתור העליון
    document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/right-arrow.svg");
    strcurrentPage = "aboutPage"
}

/* onClickSearch
--------------------------------------------------------------
Description: Adds search box and listener to input */
const onClickSearch = () => {
    if (strcurrentPage === "aboutPage") {
        sendToHomePage();
    } else if (strcurrentPage === "practicePage") {
        if(strClickedPracticeQuestion !== undefined) {
            if(QUESTIONS[currentQuestion].type === "binary") {
                // מוריד סימנים קודמים
                document.querySelector(`.prcticeQuestionContainer .false`).style.backgroundColor = "white";
                document.querySelector(`.prcticeQuestionContainer .true`).style.backgroundColor = "white";
            } else {
                for (let i = 1; i <= 4; i++) {
                    document.querySelector(`.ans${i} img`).classList.remove(objInfo[strCurrentSubject].color);
                    document.querySelector(`.practiceQuestionSqure${i}`).setAttribute("src", "../assets/images/grapics/practice/answer-squre-unmarked.svg");
                }
            }
            // מוריד סימונים מהשאלות
            if (QUESTIONS[currentQuestion][`correctAns`] !== strClickedPracticeQuestion) {
                document.querySelector(`.practicePage .${strClickedPracticeQuestion} div`).classList.remove("wrongAnswer");
            }
            document.querySelector(`.${QUESTIONS[currentQuestion][`correctAns`]} div`).classList.remove("correctAnswer");
        }
            // משנה צבע של כפתור בדיקה ושל ריבועי התשובות
            document.querySelector(`.practiceBottomButton`).classList.remove(objInfo[strCurrentSubject].color);
            // משנה חזרה כפתור בדיקה
            document.querySelector(`.practiceBottomButton`).setAttribute("src", "../assets/images/grapics/practice/check_button.svg");
        currentQuestion = 0;
        creatMedShelfs();
    } else if (strcurrentPage === "examPrePage" || strcurrentPage === "endOfTest") {
        sendToHomePage();
    } else if (strcurrentPage !== "medId") {
        // מראה את תיבת החיפוש
        document.querySelector('.searchBoxHolder').classList.remove("hidden");
        document.querySelector('.searchBox').classList.remove("hidden");
        // מעלים כותרת וכפתורים ומשנה גל
        document.querySelector('.title').classList.add("hidden");
        document.querySelector('.aboutButton').classList.add("hidden");
        document.querySelector('.wave').setAttribute("src", "../assets/images/grapics/home-page/search-wave.svg");
        // הופך את המסך לשחור
        document.querySelector('.searchScren').classList.add("darkScreen");
        if (strcurrentPage === "medShelf") {
            document.querySelector('.medTypeSymbol').classList.add("hidden");
        }
        document.querySelector('.darkScreen').addEventListener("click", () => {
            // מעלים מסך חיפוש
            document.querySelector('.searchBoxHolder').classList.add("hidden");
            document.querySelector('.searchBox').classList.add("hidden");
            document.querySelector('.dropDown').classList.add("hidden");
            document.querySelector('.searchScren').classList.remove("darkScreen");
            // מחזיר כותרת ומשנה בחזרה גל
            document.querySelector('.title').classList.remove("hidden");
            document.querySelector('.wave').setAttribute("src", "../assets/images/grapics/home-page/opening-wave.svg");
            if (strcurrentPage === "medShelf") {
                // מחזיר מדפי תרופות
                document.querySelector('.medTypeSymbol').classList.remove("hidden");
            } else {
                // מחזיר מסך בית
                document.querySelector('.aboutButton').classList.remove("hidden");
            }
        });
        document.querySelector('.searchBox').addEventListener('input', onSearch);
    } 
}

/* onSearch
--------------------------------------------------------------
Description: cheack for search match and creat dropdown accordingly */
const onSearch = () => {
    document.querySelector('.dropDown').style.pointerEvents = "all";
    // Saves user input in a varuble and resets the dropdown html.
    let strUserInput = document.querySelector('.searchBox').value;
    document.querySelector('.dropDown').innerHTML = "";
    document.querySelector('.dropDown').style.zIndex = "2";
    document.querySelector('.dropDown').classList.remove("hidden");
    // Goes over the object to check for a search match.
    for (let subject of Object.keys(objInfo)){
        for(let subSubject of Object.keys(objInfo[subject])){
            for(let key of Object.keys(objInfo[subject][subSubject])){
                //Push the current match to it.
                if(key.includes(strUserInput) && strUserInput !== "" && key !== "discription"){
                    let div = document.createElement("div");
                    div.innerHTML = addSpace(key);
                    div.classList.add("dropDownItem", key, subSubject, subject);
                    document.querySelector('.dropDown').append(div);
                    document.querySelector(`.${key}`).addEventListener("click", creatMedID);
                }
            }
        }
    }
    bSearchScreen = true
}

/* creatMedID
--------------------------------------------------------------
Description: Shows medicine id, hides privios div and adds listener to retern button*/
const creatMedID = (event) => {
    // שומר את התת תת נושא הנוכחי ואת האובייקט שלו
    let strCurrentMed =  event.currentTarget.classList[1];
    let strCurrentSubSubject = event.currentTarget.classList[2];
    let objCurrentMed =  objInfo[event.currentTarget.classList[3]][strCurrentSubSubject][strCurrentMed];
    // מראה את הדיב של התת תת נושא
    document.querySelector(`.medicineId`).classList.remove("hidden");
    // משנה מסך בהתאם למסך ממנו באנו
    if (strcurrentPage === "medShelf") {
        // מעלים תתי נושאים
        let shelf = document.querySelector(`.${strCurrentSubject}Shelf`);
        document.querySelector(`.shelfsPage`).removeChild(shelf);
        document.querySelector(`.shelfsButtons`).classList.add("hidden");
    } else {
        // מעלים את המסך בית
        document.querySelector('.homePageButtons').classList.add("hidden");
        document.querySelector('.aboutButton').classList.add("hidden");
    }
    if (bSearchScreen) {
        // מעלים מסך חיפוש
        document.querySelector('.searchBoxHolder').classList.add("hidden");
        document.querySelector('.searchBox').classList.add("hidden");
        document.querySelector('.dropDown').classList.add("hidden");
        document.querySelector('.searchScren').classList.remove("darkScreen");
        document.querySelector('.title').classList.remove("hidden");
        document.querySelector('.wave').setAttribute("src", "../assets/images/grapics/home-page/opening-wave.svg");
        document.querySelector('.dropDown').style.pointerEvents = "none";
         // משנה צבע
         if (strCurrentSubject !== undefined) {
            document.querySelector(`.wave`).classList.remove(objInfo[strCurrentSubject].color);
            document.querySelector(`.topButton`).classList.remove(objInfo[strCurrentSubject].color);
        }
        strCurrentSubject = event.currentTarget.classList[3];
        // שומר סוג תרופה
        strMedTypeFromSearch = objInfo[event.currentTarget.classList[3]].color;
        // משנה צבע של הגל והכפתור
        document.querySelector(`.wave`).classList.add(strMedTypeFromSearch);
        document.querySelector(`.topButton`).classList.add(strMedTypeFromSearch);
    }
    // משנה כפתור עליון
    document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/right-arrow.svg");
    // מחזיר מאזיני לחיצה, מאתחל גלילה ומוחק תעודות זהות קודמות
    document.querySelector('.medicineId').style.pointerEvents = "all";
    document.querySelector('.medicineId').innerHTML = "";
    document.querySelector('.medicineId').scrollTop = 0;
    // משנה כותרת
    document.querySelector(`.title`).classList.add("titelMedId");
    document.querySelector(`.title`).innerHTML = addSpace(strCurrentMed);
    // משכפל טמפלט ומכניס את התעודת זהות
    let template = document.querySelector(`.${objCurrentMed.type}`);
    let clon = template.content.cloneNode(true);
    document.querySelector('.medicineId').appendChild(clon);
    insertInfoToId(objCurrentMed, strCurrentMed);
    // שם מאזין לחץ חזור לפי הדף שהיה קודם
    if (strcurrentPage === "medShelf") {
        document.querySelector('.topButton').addEventListener("click", creatMedShelfs);
    } else {
        document.querySelector('.topButton').addEventListener("click", sendToHomePage);
    }
    // שומר את העמוד הנוכחי
    strcurrentPage = "medId"
}

/* insertInfoToId
--------------------------------------------------------------
Description: */
const insertInfoToId = (objCurrentMed, strCurrentMed) => {
    // Check which type and change html accordingly
    document.querySelector(`.medicineId .sub-titles`).innerHTML = addSpace(strCurrentMed);
    switch (objCurrentMed.type) {
        case 'text':
            for(let i = 0; i < objCurrentMed.content.length; i++){
                let parah = El("div", {cls : "IdParah"}, objCurrentMed.content[i]);
                document.querySelector(`.content`).append(parah); 
            }
            break;
        case 'listDots': case 'listNumbers':
            for(let i = 0; i < objCurrentMed.content.length; i++){
                let parah = El("li", {cls : "listItem"}, objCurrentMed.content[i]);
                document.querySelector(`.content`).append(parah); 
            }
            break;
        case 'textAndPic':
            for(let i = 0; i < objCurrentMed.content.length; i++){
                let parah = El("div", {cls : "IdParah"}, objCurrentMed.content[i]);
                document.querySelector(`.content`).append(parah); 
            }
            document.querySelector(`.idPic`).setAttribute("src", objCurrentMed.pic); 
            break;
        case 'textAndPics':
            for(let i = 0; i < objCurrentMed.content.length; i++){
                let parah = El("div", {cls : "IdParah"}, objCurrentMed.content[i]);
                document.querySelector(`.content`).append(parah); 
            }
            for(let i = 0; i < objCurrentMed.pic.length; i++){
                let parah = El("img", {cls : "picId", attributes : {src : objCurrentMed.pic[i]}});
                document.querySelector(`.idPicContainer`).append(parah); 
            }
            break;
        case 'textAndVideo':
            for(let i = 0; i < objCurrentMed.content.length; i++){
                let parah = El("div", {cls : "IdParah"}, objCurrentMed.content[i]);
                document.querySelector(`.content`).append(parah); 
            }
            document.querySelector(`.youtubeVideo`).setAttribute("src", objCurrentMed.video); 
            break;
        default: console.log("default");
    }

}

/* addSpace
--------------------------------------------------------------
Description: change hyphen to space */
const addSpace = (phrase) => {
    return phrase.replace(/-/g, ' ').replace(/_/g, '"').replace(/z/g, '/');
}

/* creatMedShelfs
--------------------------------------------------------------
Description: */
const creatMedShelfs = (event) => {
    if (strcurrentPage === "medId") {
        //  מעלים תעודת זהות, משנה מאפיינים לכותרת ומראה סמל
        document.querySelector('.medicineId').classList.add("hidden");
        document.querySelector(`.title`).classList.remove("titelMedId");
        // משנה את הכפתור העליון ושם לו מאזין  
        document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/search-button.svg");
        document.querySelector('.topButton').removeEventListener("click", creatMedShelfs);
        // משנה צבע של הגל והכפתור
        if (strMedTypeFromSearch !== undefined) {
            document.querySelector(`.wave`).classList.remove(objInfo[strCurrentSubject].color);
            document.querySelector(`.topButton`).classList.remove(objInfo[strCurrentSubject].color);
        }
    } else if (strcurrentPage === "homePage") {
        // שומר את סוג התרופות ומעלים מסך בית
        strCurrentSubject = event.currentTarget.classList[1]
        document.querySelector('.homePageButtons').classList.add("hidden");
        document.querySelector('.aboutButton').classList.add("hidden");
    } else if (strcurrentPage === "practicePage") {
        // משנה מאפיינים של כותרת
        document.querySelector(`.titleConeiner`).classList.remove("titleContainerPractice");
        // משנה גל וכפתור עליון
        document.querySelector('.wave').setAttribute("src", "../assets/images/grapics/home-page/opening-wave.svg");
        document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/search-button.svg");
        document.querySelector('.topButton').classList.remove("topButtonPractice");
        // מעלים דמות ושאלה
        document.querySelector('.practicePage').classList.add("hidden");
        // משנה צבע של חלונית תשובות ושל כפתור סיום
        document.querySelector(`.practiceBottomButton`).classList.remove(objInfo[strCurrentSubject].color);
        document.querySelector(`.practiceRightAnswersConteiner`).classList.remove(objInfo[strCurrentSubject].color);
        // מחליף תמונה של כפתור סיום לכפתור בדיקה
        document.querySelector(`.practiceBottomButton`).setAttribute("src", "../assets/images/grapics/practice/check_button.svg");
        // מעלים שאלות ומראה תשובות נכונות
        document.querySelector(`.practiceRightAnswersConteiner`).classList.add("hidden");
        document.querySelector(`.answersContainer`).classList.remove("hidden");
    }
   
    // שומר את העמוד הנוכחי
    strcurrentPage = "medShelf"
    // משנה צבע לפי הסוג
    document.querySelector(`.wave`).classList.add(objInfo[strCurrentSubject].color);
    document.querySelector(`.topButton`).classList.add(objInfo[strCurrentSubject].color);
    document.querySelector(`.searchBoxHolder`).classList.add(objInfo[strCurrentSubject].color);
    document.querySelector(`.shelfsButtons .homeButton`).classList.add(objInfo[strCurrentSubject].color);
    // document.querySelector(`.practiceButton`).classList.add(objInfo[strCurrentSubject].color);
    // משנה כותרת
    document.querySelector(`.title`).innerHTML = addSpace(strCurrentSubject);
    document.querySelector(`.title`).classList.add("titleMedShelfs");
    // יוצר קונטיינר למדפים
    let shelfContent = El("div", {classes : [`${strCurrentSubject}Shelf`, "medShelf"]},
    El("img", {attributes: {src: objInfo[strCurrentSubject].pic , class: "medTypeSymbol"}}),
    El("div", {classes : [`${strCurrentSubject}ShelfContainer`, "medShelfContainer"]})
        );
    document.querySelector(`.shelfsPage`).append(shelfContent);
    // שומר אינדקס למדפים ויוצר מדפים לפי מספר תתי הנושאים
    let index = 1;
    for(let key of Object.keys(objInfo[strCurrentSubject])) {
        if(key !== "pic" && key !== "color"){
            // let shelf = El("div", {classes : [`shelfs`, `shelf${index}`], listeners : {click : controlShelfsDropDown}},
            //     El("div", {cls : `shelfHedline`},
            //         addSpace(key),
            //         El("img", {attributes : {src: `../assets/images/grapics/med-shelfs/down-button.svg`}, classes : ["downButton", objInfo[strCurrentSubject].color]})
            //     ),
            //     El("img", {attributes : {src: `../assets/images/grapics/med-shelfs/shelf.svg`}, classes : ["shelf", objInfo[strCurrentSubject].color]})
            // );
            // document.querySelector(`.${strCurrentSubject}Shelf`).append(shelf);
            
            // let shelfDropDown = El("div", {classes : [`shelf${index}dropDown`, `shelfsdropDown`, `hidden`]},
            // El("div", {cls : `shelfDiscriptionSection`}),
            // El("div", {cls : `shelfPicSection`}),
            // );
            // document.querySelector(`.${strCurrentSubject}Shelf`).append(shelfDropDown);
            for(let subSubject of Object.keys(objInfo[strCurrentSubject][key])) {
                if(subSubject !== "discription"){
                    let dropDownPic = El("div", {classes : [`shelfMedPicContainer`, subSubject, key, strCurrentSubject], listeners : {click : creatMedID}},
                    // El("img", {attributes : {src: `../assets/images/grapics/med-shelfs/down-button.svg`}, classes : ["shelfMedPic"]}),
                    addSpace(subSubject),
                    );
                    document.querySelector(`.${strCurrentSubject}ShelfContainer`).append(dropDownPic);
                } else {
                    document.querySelector(`.${strCurrentSubject}ShelfContainer`).append(objInfo[strCurrentSubject][key].discription);                    
                }
            }
            index++;
        }
    }
    // מראה סמל בכותרת וכפתורים למטה
    document.querySelector(`.shelfsButtons`).classList.remove("hidden");
    document.querySelector(`.homeButton`).addEventListener("click", sendToHomePage);
    // שומר שאלות ושולח לתרגול
    // QUESTIONS = shuffle(DATA[strCurrentSubject]["questionsPractice"]);
    // document.querySelector(`.practiceButton`).addEventListener("click", onClickPractice);
    bSearchScreen = false;
}

/* controlShelfsDropDown
--------------------------------------------------------------
Description: */
const controlShelfsDropDown = (event) => {
    // שומר מדף שנלחץ
    let strChosenShelf = event.currentTarget.classList[1];
    // סוגר מדף
    if (document.querySelector(`.${strCurrentSubject}Shelf >  .${strChosenShelf} .downButton`).getAttribute("src").includes("up")) {
        document.querySelector(`.${strCurrentSubject}Shelf >  .${strChosenShelf} .downButton`).setAttribute("src", "../assets/images/grapics/med-shelfs/down-button.svg");
        document.querySelector(`.${strCurrentSubject}Shelf >  .${strChosenShelf}dropDown`).classList.add("hidden");
    }else { // פותח מדף
        let arrMedIdButtons = document.querySelectorAll(`.shelfMedPicContainer`);
        for (let i = 0; i < arrMedIdButtons.length; i++) {
            arrMedIdButtons[i].addEventListener('click', creatMedID);
        }
        document.querySelector(`.${strCurrentSubject}Shelf >  .${strChosenShelf}dropDown`).classList.remove("hidden");
        document.querySelector(`.${strCurrentSubject}Shelf >  .${strChosenShelf} .downButton`).setAttribute("src", "../assets/images/grapics/med-shelfs/up-button.svg");
    }
}

/* sendToHomePage
--------------------------------------------------------------
Description: */
const sendToHomePage = () => {
    if (strcurrentPage === "medId") {
        // מוריד צבע של הגל והכפתור
        document.querySelector(`.wave`).classList.remove(objInfo[strCurrentSubject].color);
        document.querySelector(`.topButton`).classList.remove(objInfo[strCurrentSubject].color);
        // לא מאפשר מאזיני לחיצה, מעלים תעודת זהות ומאפיינים של הכותרת
        document.querySelector('.medicineId').style.pointerEvents = "none";
        document.querySelector('.medicineId').classList.add("hidden");
        document.querySelector(`.title`).classList.remove("titelMedId");
        // משנה כפתור חץ לחיפוש ומוריד ממנו מאזין
        document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/search-button.svg");
        document.querySelector('.topButton').removeEventListener("click", sendToHomePage);
    } else if (strcurrentPage === "medShelf") {
        // מעלים מדפים, סמלים בכותרת וכפתורים למטה    
        let shelf = document.querySelector(`.${strCurrentSubject}Shelf`)
        document.querySelector(`.shelfsPage`).removeChild(shelf);
        document.querySelector(`.shelfsButtons`).classList.add("hidden");
        // משנה מאפיינים של כותרת
        document.querySelector(`.title`).classList.remove("titleMedShelfs");
        // משנה חזרה צבעים לכחול
        document.querySelector(`.wave`).classList.remove(objInfo[strCurrentSubject].color);
        document.querySelector(`.topButton`).classList.remove(objInfo[strCurrentSubject].color);
        document.querySelector(`.searchBoxHolder`).classList.remove(objInfo[strCurrentSubject].color);
        document.querySelector(`.shelfsButtons .homeButton`).classList.remove(objInfo[strCurrentSubject].color);
        // document.querySelector(`.practiceButton`).classList.remove(objInfo[strCurrentSubject].color);
    } else if (strcurrentPage === "examPrePage") {
        // מעלים דף התחלת מבחן, ומשנה כפתור עליו לחיפוש 
        document.querySelector(`.examPage`).classList.add("hidden");
        document.querySelector(`.beforeExamPage`).classList.add("hidden"); 
        document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/search-button.svg");
    }  else if (strcurrentPage === "endOfTest") {
        // מעלים דף סיום מבחן, ומשנה כפתור עליו לחיפוש 
        document.querySelector(`.afterExamPage`).classList.add("hidden");
        document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/search-button.svg");
    } else {
        // מעלים דף אודות, ומשנה כפתור עליו לחיפוש 
        document.querySelector('.aboutPage').classList.add("hidden");
        document.querySelector('.topButton').setAttribute("src", "../assets/images/grapics/home-page/search-button.svg");
    }
    // משנה כותרת, מראה דף בית וכפתור אודות 
    document.querySelector(`.title`).innerHTML = addSpace(HEADLINE);
    document.querySelector('.homePage').classList.remove("hidden");
    document.querySelector('.aboutButton').classList.remove("hidden");
    document.querySelector('.homePageButtons').classList.remove("hidden");
  
    // שומר דף נוכחי
    strcurrentPage = "homePage"
}


//   @template T
//   @param {keyof HTMLElementTagNameMap} tagName 
//   @param {{classes?: string[], cls?: string, id?: string, attributes: {[index: string]: string | { toString(): string }}, listeners: Listeners}} options 
//   @param  {...string | Node} children 
function El(tagName, options = {}, ...children) {
    let el = Object.assign(document.createElement(tagName), options.fields || {});
    if (options.classes && options.classes.length) el.classList.add(...options.classes);
    else if (options.cls) el.classList.add(options.cls);
    if (options.id) el.id = options.id;
    el.append(...children.filter(el => el));
    for (let listenerName of Object.keys(options.listeners || {}))
        if (options.listeners[listenerName]) el.addEventListener(listenerName, options.listeners[listenerName], false);
    for (let attributeName of Object.keys(options.attributes || {})) {
        if (options.attributes[attributeName] !== undefined) el.setAttribute(attributeName, options.attributes[attributeName]);
    }
    return el;
}